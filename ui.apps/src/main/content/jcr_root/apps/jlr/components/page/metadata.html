<!--/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  ~ Copyright 2016 Adobe
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/-->


  <sly data-sly-use.pageConfig="com.jlr.core.models.PageModel">
  <sly data-sly-test="${pageConfig.CommaSeparatedGtmTagsListWithQuotes}">
    <script data-id="gtmTags">
      var gtmTags = ['${pageConfig.CommaSeparatedGtmTagsListWithQuotes @context = "html"}'];
    </script>

    <script id="gtm">
      function initGTM(gtmId) {
        if (!gtmId) return;
        (function(w, d, s, l, i) {
          w[l] = w[l] || [];
          w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
          var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != "dataLayer" ? "&l=" + l : "";
          j.async = true;
          j.src = "//www.googletagmanager.com/gtm.js?id=" + i + dl;
          f.parentNode.insertBefore(j, f);
        })(window, document, "script", "dataLayer", gtmId);
      }
      function loadGTM(tags) {
        if (tags == null) return;
        for (var i = 0; i < tags.length; i++) {
          initGTM(tags[i]);
        }
      }
    </script>

   </sly> 
  </sly>
   <link rel="canonical" href="${properties.ogUrl}"/>

   <meta data-sly-test.keywords="${properties.keywords}" name="keywords" content="${keywords}"/>
   <meta data-sly-test.title="${properties['jcr:title']}" name="title" content="${title}"/>
   <meta data-sly-test.description="${properties['jcr:description']}" name="description" content="${description}"/>

    <!-- Search Crawler controls --> 
   <sly data-sly-test="${properties.noIndex}">
   	<meta name="robots" content="noindex">
   </sly>
   <sly data-sly-test="${properties.noFollow}">
  	 <meta name="robots" content="nofollow">
   </sly>

   <sly data-sly-test="${properties.schema}">
  	 <script type="application/ld+json">
    ${properties.schema @ context='scriptRegExp'} 
     </script>
   </sly>

   <sly data-sly-test.scheme="${request.scheme}"/>
   <sly data-sly-test.servername="${request.serverName}"/>
   <sly data-sly-test.serverport="${request.serverPort}"/>
   <sly data-sly-test.uri="${request.requestURI}"/>

   <!-- Last Modified -->
   <meta data-sly-test.lastModified="${properties['cq:lastModified'] ? properties['cq:lastModified'] : properties['cq:lastPublished']  }" content="${ 'dd-MM-yyyy' @ format=lastModified}" name="last-modified" />

   <!-- Open Graph Details -->
   <meta data-sly-test.ogTitle="${properties.ogTitle ? properties.ogTitle : properties['jcr:title']}" property="og:title" content="${ogTitle}"/>
   <meta data-sly-test.ogType="${properties.ogType ? properties.ogType :'website'}"  property="og:type" content="${ogType}"/>
   <meta data-sly-test.ogUrl="${properties.ogUrl}" property="og:url" content="${ogURL}"/>
   <meta data-sly-test="${!properties.ogUrl}" property="og:url" content="${scheme}://${servername}:${serverport}${uri}"></meta>
   <meta data-sly-test.description="${properties.ogDescription ? properties.ogDescription : properties.jcr:description}" property="og:description" content="${description}"/>		
   <meta data-sly-test.ogImageUrl="${properties.ogImageUrl}" property="og:image" content="${ogImageUrl}"	/>
   <meta data-sly-test.siteName="${properties.siteName ? properties.siteName :'landrover'}"  property="og:site_name" content="${siteName}"/>

	<!-- Twitter Card Details -->
   <meta data-sly-test.twitterTitle="${properties.twitterTitle ? properties.twitterTitle : properties['jcr:title']}" property="twitter:title" content="${twitterTitle}"/>
   <meta data-sly-test.twitterDescription="${properties.twitterDescription ? properties.twitterDescription : properties.jcr:description}" property="twitter:description" content="${twitterDescription}"/>	
   <meta data-sly-test.twitterCard="${properties.twitterCard ? properties.twitterCard :'summary_large_image'}"  property="twitter:card" content="${twitterCard}"/>

   <meta data-sly-test.templateName="${page.templateName}" name="template" content="${templateName}"/>
   <meta name="viewport" content="width=device-width, initial-scale=1">